# Функционал корзины — Исправленная версия

## Ограничения на товары

1. Пользователь может добавить от 1 до 4 штук одного товара.
   *Почему 4: чтобы 5 разных товаров × 4 шт. = 20 шт. — не нарушаем суммарный лимит.*

2. В корзине может быть не больше 5 разных товаров.

3. Общее количество всех товаров в корзине — не больше 20 штук.

4. Минимальное количество товара — 1 штука. Чтобы удалить товар, пользователь нажимает кнопку "Удалить" рядом с позицией.

## Цены

5. Цена товара сохраняется на момент добавления в корзину и не меняется, даже если в каталоге цена изменилась.
   *Исключение: если товара больше нет в наличии — система покажет предупреждение.*

## Интерфейс корзины

6. В корзине отображается для каждого товара:
   - Название и фото
   - Количество (с возможностью изменить от 1 до 4)
   - Цена за штуку (та, что была при добавлении)
   - Общая стоимость позиции (количество × цена)

7. При попытке добавить товар, который нарушит лимиты, показывается конкретное сообщение:
   - «Нельзя добавить больше 5 разных товаров»
   - «В корзине уже 20 товаров — уберите что-то, чтобы добавить новое»
   - «Максимум 4 штуки одного товара»

## Реклама

8. В корзине может показываться рекламный блок с другими товарами.

9. Реклама показывается по будням:
   - Утром: с 8:00 до 10:00 по времени пользователя
   - Вечером: с 18:00 до 20:00 по времени пользователя
   *Если пользователь в другом часовом поясе — считаем по его устройству.*